iter=$1

wf=primex-pi0-skims-calibration-added

swif create $wf

#runnb=(61321 61322 61323 61325 61327 61329 61330 61331 61332 61333 61334 61335 61336 61337 61340 61341 61342 61343 61344 61378 61379 61391 61434 61435 61436 61437 61439 61441 61442 61443 61444 61445 61446 61447 61462 61465 61466 61467 61468 61469 61470 61471 61472 61473 61474 61475 61476 61477 61478 61479 61480 61481 61482 61483 61484 61485 61486 61487 61488 61489 61490 61491 61493 61494 61495 61496 61497 61498 61499 61500 61501 61502 61503 61504 61505 61506 61507 61508 61509 61510 61511 61512 61513 61514 61515 61516 61517 61518 61519 61522 61523 61524 61525 61526 61527 61528 61529 61530 61531 61532 61533 61534 61537 61538 61539 61546 61547 61548 61549 61550 61551 61553 61554 61555 61556 61557 61558 61559 61560 61561 61562 61563 61564 61565 61566 61567 61568 61621 61622 61624 61626 61627 61628 61629 61630 61631 61632 61634 61635 61636 61637 61638 61639 61640 61642 61643 61644 61645 61646 61647 61648 61649 61650 61651 61652 61654 61655 61656 61657 61658 61659 61660 61661 61662 61663 61664 61690 61691 61692 61694 61695 61697 61698 61699 61700 61701 61702 61703 61704 61705 61706 61707 61709 61710 61711 61712 61713 61715 61717 61718 61719 61720 61722 61723 61727 61728 61729 61731 61732 61734 61735 61736 61737 61738 61739 61740 61741 61742 61743 61744 61745 61746 61747 61748 61749 61750 61751 61752 61753 61754 61755 61756 61757 61758 61759 61760 61763 61774 61775 61777 61778 61779 61780 61781 61782 61783 61785 61786 61788 61789 61790 61791 61792 61793 61794 61795 61796 61797 61798 61799 61800 61802 61803 61804 61805 61806 61807 61808 61809 61810 61811 61812 61813 61814 61815 61816 61817 61818 61821 61823 61825 61826 61827 61828 61829 61830 61831 61832 61833 61834 61835 61836 61837 61838 61839 61840 61841 61842 61843 61844 61845 61846 61847 61848 61849 61850 61866 61867 61868 61874 61875 61876 61877 61878 61879 61880 61881 61882 61883 61884 61885 61887 61888 61889 61890 61891 61892 61893 61894 61895 61905 61906 61908 61909 61910 61914 61915 61916 61917 61918 61930 61931 61933 61934 61935 61936 61937 61938 61939 61947 61950 61951 61952 61953 61954 61955 61956)

#runnb=(61321 61322 61323 61325 61327 61329 61330 61331 61332 61437 61439 61470 61471 61472 61473 61474 61475 61476 61477 61478 61479 61510 61511 61512 61513 61514 61515 61516 61517 61518 61519 61700 61701 61702 61703 61704 61705 61706 61707 61709 61810 61811 61812 61813 61814 61815 61816 61817 61818 61930 61931 61933 61934 61935 61936 61937 61938 61939 61947 61950 61951 61952 61953 61954 61955 61956)

runnb=(61321 61322 61323 61325 61327 61329 61340 61341 61342 61343 61344 61378 61379 61391 61434 61435 61436 61437 61439 61470 61471 61472 61473 61474 61475 61476 61477 61478 61479 61490 61491 61493 61494 61495 61496 61497 61498 61499 61510 61511 61512 61513 61514 61515 61516 61517 61518 61519 61621 61622 61624 61626 61627 61628 61629 61700 61701 61702 61703 61704 61705 61706 61707 61709 61750 61751 61752 61753 61754 61755 61756 61757 61758 61759 61810 61811 61812 61813 61814 61815 61816 61817 61818 61874 61875 61876 61877 61878 61879 61930 61931 61933 61934 61935 61936 61937 61938 61939 61947 61950 61951 61952 61953 61954 61955 61956)

work_dir=/work/halld/home/ijaegle/data/calibration

path=$work_dir/he-root-files-$iter

out_dir=$work_dir/he-root-files-added-$iter

roodir=$out_dir
mkdir -p $roodir

rundir=$work_dir/run_added
mkdir -p $rundir

errdir=$work_dir/err_added
mkdir -p $errdir

outdir=$work_dir/out_added
mkdir -p $outdir

for rnb in "${runnb[@]}"; do
    runfile=run_$rnb.sh
    echo "source /work/halld/home/ijaegle/Env/custom_GlueX_dev.sh" > $runfile
    echo "cd $work_dir" >> $runfile
    echo "hadd -f $roodir/run_$rnb.root $path/*$rnb*.root" >> $runfile
    chmod +x $runfile
    errfile=$errdir/$ntuple.err
    outfile=$outdir/$ntuple.out
    swif add-job -workflow $wf -project gluex -track analysis -stdout $outfile -stderr $errfile $work_dir/./run_$rnb.sh
    #$work_dir/./run_$rnb.sh
done
swif run $wf
